/*
 * @Author: 林武
 * @Date: 2023-03-22 16:16:37
 * @LastEditors: 林武
 * @LastEditTime: 2023-04-21 16:27:32
 * @FilePath: \main\assets\Scripts\game\GameModel.ts
 * @Description: 
 * 
 * Copyright (c) 2023 by 林武, All Rights Reserved. 
 */

export class GameModel {
   /**
    * 位置点
    */
   // private testPoint = "[0,1.253877551020408,1.6950566893424037,1.9969160997732427,2.5774149659863945,2.8792743764172335,3.1811337868480725,3.4829931972789114,3.7848526077097504,4.08671201814059,4.388571428571429,4.690430839002268,5.294149659863946,5.874648526077097,6.176507936507937,6.478367346938776,6.780226757369615,7.082086167800454,7.383945578231293,7.685804988662132,7.987664399092971,8.591383219954649,8.893242630385487,9.496961451247165,9.93814058956916,10.379319727891156,10.983038548752834,11.284897959183674,11.888616780045352,12.631655328798185,13.072834467120181,13.978412698412699,14.44281179138322,15.046530612244897,15.464489795918368,15.789569160997733,16.091428571428573,16.39328798185941,16.857687074829933,17.438185941043084,17.87936507936508,18.297324263038547,18.738503401360543,19.086802721088436,19.388662131519276,19.82984126984127,20.271020408163267,20.572879818594103,21.106938775510205,21.640997732426303,22.221496598639455,22.84843537414966,23.289614512471655,23.591473922902495,24.009433106575965,24.589931972789117,25.077551020408162,25.379410430839002,25.68126984126984,26.261768707482993,26.586848072562358,26.888707482993198,27.492426303854874,28.0497052154195,28.398004535147393,28.908843537414967,29.41968253968254,30.1859410430839,30.48780045351474,30.789659863945577,31.091519274376417,31.672018140589568,31.997097505668933,32.43827664399093,32.879455782312924,33.18131519274377,33.483174603174604,33.78503401360544,34.08689342403628,34.5512925170068,34.9924716553288,35.57297052154195,35.87482993197279,36.17668934240363,36.47854875283447,36.78040816326531,37.29124716553288,37.68598639455782,38.17360544217687,38.59156462585034,39.05596371882086,39.3578231292517,39.77578231292517,40.07764172335601,40.379501133786846,40.983219954648526,41.28507936507936,41.586938775510205,42.05133786848072,42.49251700680272,43.073015873015876,43.37487528344671,43.67673469387755,44.1643537414966,44.582312925170065,45.16281179138322,45.464671201814056,45.7665306122449,46.068390022675736,46.393469387755104,46.90430839002268,47.275827664399095,47.763446712018144,48.18140589569161,48.48326530612245,48.78512471655329,49.08698412698413,49.388843537414964,49.99256235827664,50.29442176870748,50.874920634920635,51.17678004535147,51.478639455782314,51.78049886621315,52.082358276643994,52.38421768707483,52.98793650793651,53.59165532879818,54.00961451247166,54.497233560090706,55.05451247165533,55.3795918367347,55.68145124716553,55.98331065759637,56.28517006802721,56.58702947845805,56.888888888888886,57.19074829931973,57.608707482993196,58.2356462585034,58.83936507936508,59.28054421768707,59.582403628117916,59.88426303854875,60.62730158730159,61.06848072562358,61.67219954648526,61.9740589569161,62.415238095238095,63.0421768707483,63.46013605442177,64.36571428571429,64.66757369614513,64.96943310657596,65.43383219954649,65.8053514739229,66.17687074829932,66.71092970521542,67.3146485260771,67.82548752834467,68.22022675736962,68.5685260770975,68.98648526077098,69.4508843537415,69.75274376417234,70.21714285714286,70.68154195011338,70.98340136054422,71.47102040816327,72.02829931972789,72.58557823129252,73.07319727891156,73.3750566893424,73.67691609977324,74.28063492063492,74.8843537414966,75.48807256235828,76.09179138321996,76.69551020408163,77.43854875283446,78.1815873015873,78.48344671201814,78.78530612244899,79.08716553287982,79.83020408163266,80.27138321995464,80.5732426303855,80.87510204081633,81.17696145124717,81.78068027210884,82.08253968253969,82.59337868480726,82.91845804988662,83.28997732426303,83.77759637188208,84.17233560090703,84.47419501133787,84.7760544217687,85.33333333333333,85.98349206349206,86.56399092970521,86.86585034013605,87.1677097505669,87.46956916099774,87.77142857142857,88.2358276643991,88.65378684807256,89.25750566893424,89.5825850340136,89.88444444444444,90.48816326530613,91.06866213151928,91.37052154195011,91.67238095238095,92.27609977324263,92.57795918367347,92.87981859410431,93.64607709750567,94.06403628117914,94.36589569160998,94.94639455782313,95.2714739229025,95.57333333333334,96.17705215419501,96.47891156462585,97.05941043083901,97.38448979591837,97.82566893424037,98.2204081632653,98.7544671201814,99.17242630385488,99.47428571428571,100.05478458049886,100.37986394557824,100.93714285714286,101.26222222222222,101.56408163265306,101.8659410430839,102.35356009070294,102.67863945578232,103.07337868480725,103.37523809523809,103.67709750566894,103.97895691609978,104.28081632653061,104.58267573696145,104.9774149659864,105.44181405895692,106.06875283446712,106.97433106575964,107.27619047619048,107.57804988662132,107.87990929705215,108.18176870748299,108.62294784580499,109.06412698412699,109.36598639455782,109.66784580498866,109.9697052154195,110.27156462585035,110.57342403628118,110.87528344671202,111.45578231292517,111.757641723356,112.05950113378685,112.36136054421769,112.68643990929705,113.12761904761905,113.54557823129252,113.87065759637188,114.45115646258503,114.75301587301587,115.0548752834467]";
   private state: number = 0;   // 游戏状态   0 进入场景未开始   1 游戏开始   2 游戏暂停
   private pointData: Array<number> = null;
   private LineIndexListData: Array<number> = null;
   private pointIndex: number = 0;   //路径点索引
   private grade: number = 0;    //难度 0  简单   1 困难   2 地狱

   /**
    * 玩家当前所在台子的索引 
    */
   private playerStagteIndex: number = 0;
   /**
    * 当前台子和下一个台子的中间z轴坐标
    */
   private stageMiddleZ: number = 0;
   constructor() {
      this.pointIndex = 0;
      // this.pointData = JSON.parse(this.testPoint);
      this.playerStagteIndex = 0;
   }

   /**
    * 设置游戏状态
    * 0 未开始  1 开始  3 通关  2 暂停（死亡）
    */
   public setState(state: number): void {
      this.state = state;
   }

   /**
    * 获取状态
    */
   public getState(): number {
      return this.state;
   }

   /**
    * 设置歌曲路径点信心
    * @param data 
    */
   public setRhythmPointData(data: Array<any>): void {
      this.pointData = data;
   }

   public setLineIndexListData(data: Array<any>): void {
      this.LineIndexListData = data;
   }

   /**
    * 获取路径点数据
    */
   public getRhythmPointData(): Array<number> {
      return this.pointData;
   }

   /**
    * 设置路径点索引
    */
   public setPointIndex(num: number): void {
      this.pointIndex = num;
   }

   /**
    * 添加路径点索引
    * @param num 
    */
   public addPointIndex(num: number = 1): void {
      this.pointIndex += num;
   }

   /**
    * 获取路径点索引
    * @returns 
    */
   public getPointIndex(): number {
      return this.pointIndex;
   }

   /**
    * 获取当前索引路径点
    */
   public getPoint(): number {
      return this.pointData[this.pointIndex];
   }

   public getLineIndex(): number {
      return this.LineIndexListData[this.pointIndex];
   }

   /**
    * 设置难度
    */
   public setGrade(num: number) {
      this.grade = num;
   }
   /**
    * 获取难度
    */
   public getGrade(): number {
      return this.grade;
   }

   public setPlayerStageIndex(num: number) {
      this.playerStagteIndex = num;
   }

   public getPlayerStageIndex(): number {
      return this.playerStagteIndex;
   }

   public addPlayerStageIndex(num: number = 1): void {
      this.playerStagteIndex += num;
      this.setStageMiddleZ();
   }

   public setStageMiddleZ(): void {
      this.stageMiddleZ = (this.pointData[this.playerStagteIndex] + this.pointData[this.playerStagteIndex + 1]) / 2 * -5;
   }

   public getStageMiddleZ(): number {
      return this.stageMiddleZ;
   }

   /**
    * 获取当前台子的z轴坐标
    */
   public getNowStageZ(): number {
      return this.pointData[this.playerStagteIndex] * -5;
   }

   /**
    * 获取下一个台子的z轴坐标
    */
   public getNextStageZ(): number {
      let pointData = this.pointData[this.playerStagteIndex] * -5;
      return pointData;
   }
}